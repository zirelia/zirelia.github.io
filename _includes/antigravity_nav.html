<nav class="fixed w-full z-50 transition-all duration-300 bg-brand-dark/80 backdrop-blur-md border-b border-white/5"
  id="navbar">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">

    <!-- Logo -->
    <a href="{{ '/' | relative_url }}{% if page.lang == 'it' %}it/{% else %}en/{% endif %}"
      class="flex items-center gap-3 text-2xl font-black tracking-tighter hover:scale-105 transition-transform font-display">
      <img src="/assets/images/logo/zirelia-logo-100x100.png" alt="Zirelia" class="h-9 w-auto">
      <span class="gradient-text">Zirelia</span>
    </a>

    <!-- Desktop Menu -->
    <div class="hidden md:flex items-center gap-8">
      {% assign nav_items = site.data.navigation_en %}
      {% if page.lang == 'it' %}
      {% assign nav_items = site.data.navigation_it %}
      {% endif %}

      {% for item in nav_items %}
      {% if item.url contains 'github.com' %}
      <a href="{{ item.url }}" target="_blank" rel="noopener"
        class="flex items-center gap-2 text-sm font-bold px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:bg-brand-purple/20 hover:border-brand-purple/50 transition-all">
        <i class="fab fa-github"></i>
        {{ item.title }}
      </a>
      {% else %}
      <a href="{{ item.url | relative_url }}"
        class="text-sm font-bold uppercase tracking-wide text-gray-400 hover:text-white transition-colors relative group">
        {{ item.title }}
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-brand-purple to-brand-pink transition-all group-hover:w-full"></span>
      </a>
      {% endif %}
      {% endfor %}

      <!-- Language Switcher (Desktop) -->
      <div class="flex items-center gap-2 text-sm font-bold uppercase tracking-wide">
        {% if page.lang == 'it' %}
        <span class="text-brand-purple">IT</span>
        <span class="text-gray-600">|</span>
        <a href="{{ page.url | replace: '/it/', '/en/' | relative_url }}"
          class="text-gray-400 hover:text-white transition-colors">EN</a>
        {% else %}
        <a href="{{ page.url | replace: '/en/', '/it/' | relative_url }}"
          class="text-gray-400 hover:text-white transition-colors">IT</a>
        <span class="text-gray-600">|</span>
        <span class="text-brand-purple">EN</span>
        {% endif %}
      </div>


    </div>

    <!-- Mobile Menu Button -->
    <button class="md:hidden text-2xl text-white" onclick="toggleMobileMenu()" aria-label="Menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div id="mobile-menu"
  class="fixed inset-0 bg-brand-dark z-[60] transform translate-x-full transition-transform duration-300 flex flex-col justify-center items-center gap-8">
  <button class="absolute top-6 right-6 text-3xl text-white" onclick="toggleMobileMenu()">
    <i class="fas fa-times"></i>
  </button>

  {% assign nav_items = site.data.navigation_en %}
  {% if page.lang == 'it' %}
  {% assign nav_items = site.data.navigation_it %}
  {% endif %}

  {% for item in nav_items %}
  {% if item.url contains 'github.com' %}
  <a href="{{ item.url }}" target="_blank" rel="noopener"
    class="text-2xl font-black flex items-center gap-3 hover:text-brand-purple transition-colors"
    onclick="toggleMobileMenu()"><i class="fab fa-github"></i> {{ item.title }}</a>
  {% else %}
  <a href="{{ item.url | relative_url }}"
    class="text-3xl font-black hover:text-brand-purple transition-colors font-display" onclick="toggleMobileMenu()">{{
    item.title }}</a>
  {% endif %}
  {% endfor %}

  <div class="flex gap-4 mt-8 flex-col items-center">
    <!-- Language Switcher (Mobile) -->
    <div class="flex items-center gap-4 text-xl font-bold uppercase tracking-wide mb-4">
      {% if page.lang == 'it' %}
      <span class="text-brand-purple border-b-2 border-brand-purple">Italiano</span>
      <a href="{{ page.url | replace: '/it/', '/en/' | relative_url }}"
        class="text-gray-500 hover:text-white transition-colors">English</a>
      {% else %}
      <a href="{{ page.url | replace: '/en/', '/it/' | relative_url }}"
        class="text-gray-500 hover:text-white transition-colors">Italiano</a>
      <span class="text-brand-purple border-b-2 border-brand-purple">English</span>
      {% endif %}
    </div>


  </div>
</div>

<script>
  function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const isOpen = !menu.classList.contains('translate-x-full');
    if (isOpen) {
      menu.classList.add('translate-x-full');
      document.body.style.overflow = '';
    } else {
      menu.classList.remove('translate-x-full');
      document.body.style.overflow = 'hidden';
    }
  }
</script>